FROM openuav:ros-cuda-11.4.2-base-ubuntu20.04

# Setup workspace and clone repositories
RUN mkdir -p /root/src && \
    cd /root/src && \
    git clone --recursive https://github.com/PX4/PX4-Autopilot.git && \
    cd /root/src/PX4-Autopilot && \
    git reset --hard 0860a61fa666b18b64ac453e744dee81af5834f0 && \
    git submodule sync --recursive && \
    git submodule update --init --recursive

WORKDIR /root/

CMD ["/bin/bash"]